@using System.Web;
@model List<PBL3.Models.SpMonth>

@{
    ViewData["Title"] = "Thống ke";


    List<string> tenLoaiMon = ViewBag.tenLoaiMon;
    int count = ((List<int>)ViewBag.soLuong).Count();
    var random = new Random();

}
<body>

    



        <div class="line-chart-container">
            <div class="line-chart" style="width:80%">
                <h2 class="text-center">Biểu đồ lợi nhuận</h2>
                <canvas id="myLineChart"></canvas>
            </div>
        </div>


        <input /> 
    
</body>
@section Scripts{
    <script>
        var years = [];
        var yearData = [];
        var yearFund = [];
        @if (Model.Count > 0)
        {
            foreach (var item in Model)
            {
                @:years.push('@item.Month/@item.Year');
                @:yearData.push('@item.Total');

                decimal von = item.Total * (decimal)0.3;
                @:yearFund.push('@von');
            }
        }


                var ctx = document.getElementById('myLineChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                //labels: ['1/2020', '2/2020', '3/2020', '4/2020', '5/2020', '6/2020','7/2020'],
                labels: years,
                datasets: [{
                    label: 'Doanh thu',
                    //data: [1200, 1400, 1300, 1600, 1800, 2000,1900],
                    data: yearData,
                    backgroundColor: 'transparent',
                    borderColor: 'red'
                },
                {
                    label: 'vốn',
                    //data: [1020, 1200, 1700, 1100, 1600, 1000,1500],
                    data: yearFund,
                    backgroundColor: 'transparent',
                    borderColor: 'yellow'

                }]
            },
            options: {
                //title: {
                //    display: true,
                //    text: 'Biểu đồ doanh thu'
                //},
                scales: { // thiết lập trục x và trục y
                    yAxes: [{
                        ticks: {
                            beginAtZero: true,
                            callback: function (value, index, values) {
                                return value.toLocaleString() + ' VNĐ'; // định dạng chuỗi nhãn trục y
                            }
                        },
                        scaleLabel: {
                            display: true,
                            labelString: 'Doanh thu (triệu VNĐ)'
                        }
                    }],
                    xAxes: [{
                        ticks: {
                            autoSkip: false, // không bỏ qua các nhãn trục x
                        },
                        scaleLabel: {
                            display: true,
                            labelString: 'Tháng năm 2020'
                        }
                    }]
                }
            }
        });



                //var donut = document.getElementById('myDonutChart').getContext('2d');
                //var myDonutChart = new Chart(donut, {
                //    type: 'doughnut',
                //    data: {
                //        labels: [
                //            'Red',
                //            'Blue',
                //            'Yellow'
                //        ],
                //        datasets: [{
                //            label: 'My First Dataset',
                //            data: [300, 50, 100],
                //            backgroundColor: [
                //                'rgb(255, 99, 132)',
                //                'rgb(54, 162, 235)',
                //                'rgb(255, 205, 86)'
                //            ],
                //            hoverOffset: 4
                //        }]
                //    }
                //})

    </script>
}